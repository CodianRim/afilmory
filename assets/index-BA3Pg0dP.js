import{c as V,j as W}from"../vendor/1-CkNOVE2J.js";import{J as X}from"./index-87VEuC2R.js";const Y=l=>Uint8Array.from(l.match(/.{1,2}/g).map(t=>Number.parseInt(t,16)));function Z(l){let{PI:t,min:c,max:r,cos:i,round:a}=Math,f=l[0]|l[1]<<8|l[2]<<16,s=l[3]|l[4]<<8,m=(f&63)/63,p=(f>>6&63)/31.5-1,d=(f>>12&63)/31.5-1,o=(f>>18&31)/31,n=f>>23,M=(s>>3&63)/63,P=(s>>9&63)/63,D=s>>15,N=r(3,D?n?5:7:s&7),A=r(3,D?s&7:n?5:7),S=n?(l[5]&15)/15:1,$=(l[5]>>4)/15,v=n?6:5,E=0,h=(j,b,T)=>{let _=[];for(let y=0;y<b;y++)for(let g=y?0:1;g*b<j*(b-y);g++)_.push(((l[v+(E>>1)]>>((E++&1)<<2)&15)/7.5-1)*T);return _},z=h(N,A,o),F=h(3,3,M*1.25),K=h(3,3,P*1.25),O=n&&h(5,5,$),L=tt(l),q=a(L>1?32:32*L),H=a(L>1?32/L:32),R=new Uint8Array(q*H*4),w=[],C=[];for(let j=0,b=0;j<H;j++)for(let T=0;T<q;T++,b+=4){let _=m,y=p,g=d,I=S;for(let e=0,u=r(N,n?5:3);e<u;e++)w[e]=i(t/q*(T+.5)*e);for(let e=0,u=r(A,n?5:3);e<u;e++)C[e]=i(t/H*(j+.5)*e);for(let e=0,u=0;e<A;e++)for(let x=e?0:1,U=C[e]*2;x*A<N*(A-e);x++,u++)_+=z[u]*w[x]*U;for(let e=0,u=0;e<3;e++)for(let x=e?0:1,U=C[e]*2;x<3-e;x++,u++){let G=w[x]*U;y+=F[u]*G,g+=K[u]*G}if(n)for(let e=0,u=0;e<5;e++)for(let x=e?0:1,U=C[e]*2;x<5-e;x++,u++)I+=O[u]*w[x]*U;let k=_-2/3*y,B=(3*_-k+g)/2,Q=B-g;R[b]=r(0,255*c(1,B)),R[b+1]=r(0,255*c(1,Q)),R[b+2]=r(0,255*c(1,k)),R[b+3]=r(0,255*c(1,I))}return{w:q,h:H,rgba:R}}function tt(l){let t=l[3],c=l[2]&128,r=l[4]&128,i=r?c?5:7:t&7,a=r?t&7:c?5:7;return i/a}function et(l,t,c){let r=l*4+1,i=6+t*(5+r),a=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,l>>8,l&255,0,0,t>>8,t&255,8,6,0,0,0,0,0,0,0,i>>>24,i>>16&255,i>>8&255,i&255,73,68,65,84,120,1],f=[0,498536548,997073096,651767980,1994146192,1802195444,1303535960,1342533948,-306674912,-267414716,-690576408,-882789492,-1687895376,-2032938284,-1609899400,-1111625188],s=1,m=0;for(let p=0,d=0,o=r-1;p<t;p++,o+=r-1)for(a.push(p+1<t?0:1,r&255,r>>8,~r&255,r>>8^255,0),m=(m+s)%65521;d<o;d++){let n=c[d]&255;a.push(n),s=(s+n)%65521,m=(m+s)%65521}a.push(m>>8,m&255,s>>8,s&255,0,0,0,0,0,0,0,0,73,69,78,68,174,66,96,130);for(let[p,d]of[[12,29],[37,41+i]]){let o=-1;for(let n=p;n<d;n++)o^=a[n],o=o>>>4^f[o&15],o=o>>>4^f[o&15];o=~o,a[d++]=o>>>24,a[d++]=o>>16&255,a[d++]=o>>8&255,a[d++]=o&255}return"data:image/png;base64,"+btoa(String.fromCharCode(...a))}function J(l){let t=Z(l);return et(t.w,t.h,t.rgba)}const at=l=>{const t=V.c(9),{thumbHash:c,className:r}=l;let i;t:{if(typeof c=="string"){let p;t[0]!==c?(p=J(Y(c)),t[0]=c,t[1]=p):p=t[1],i=p;break t}let m;t[2]!==c?(m=J(c),t[2]=c,t[3]=m):m=t[3],i=m}const a=i;let f;t[4]!==r?(f=X("h-full w-full",r),t[4]=r,t[5]=f):f=t[5];let s;return t[6]!==a||t[7]!==f?(s=W.jsx("img",{src:a,className:f}),t[6]=a,t[7]=f,t[8]=s):s=t[8],s};export{at as T,Y as d,J as t};
